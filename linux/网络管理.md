<!-- TOC -->

- [1. 版本](#1-版本)
- [2. vi](#2-vi)
    - [2.1.](#21)
- [3. 网络管理](#3-网络管理)
    - [3.1. 学习目标](#31-学习目标)
    - [3.2. 网络状态查看工具](#32-网络状态查看工具)
        - [3.2.1. ifconfig](#321-ifconfig)
        - [3.2.2. 修改网卡名称](#322-修改网卡名称)
        - [3.2.3. 查看网关](#323-查看网关)
        - [3.2.4. 配置网关](#324-配置网关)

<!-- /TOC -->



## 1. 版本

- 内核版本
  - https://www.kernal.org
- 发行版本
  - Red Hat
  - Centos
  - Debian
  - Ubuntu



## 2. vi



- 模式
  - 普通模式
    - 只能看
  - 命令模式（输入命令）
    - :
      - :w
      - :wq!
      - :! linux命令
      - :s/old/new
      - :%s/old/new
      - :%s/old/new/g
      - :set nu
      - :set nonu
    - /
      - /要查找的值  n: 下一个，shift+n: 上一个

### 2.1.  

## 3. 网络管理



### 3.1. 学习目标



- 网络状态查看
- 网络配置
- 路由命令
- 网络故障排除
- 网络服务管理
- 常用网络配置文件





### 3.2. 网络状态查看工具



两套，net-tools(centos7 之前) 和 iproute（centos7 之后）

1. net-tools
   - ifconfig
   - route
   - netstat
2. iproute2（centos7之后推荐使用的）
   - ip
   - ss


#### 3.2.1. ifconfig

- if：iterface（网络接口）
- 第一块网卡 ：eth0
- 有的机器的第一块网卡可能是以下的名字：
  - eno1 板载网卡
  - ens33 PCI-E网卡
  - enp0s3 无法获取物理信息的 PCI-E 网卡
  - Centos7 使用了一致性网络设备命名，如果以上都不匹配，则将第一个网卡命名为 eth0
    - **好处**：网卡统一命名，方便管理数量众多的服务器





#### 3.2.2. 修改网卡名称

- 网卡命名规则受 biosdevname 和 net.ifnames 两个参数影响

- 编辑 /etc/default/grub 文件，设置或增加 biosdevname=0 net.ifnames=0

  - biosdevname 的默认值是 0，net.ifnames 的默认值是1
  - 如果该配置文件中，没有这两个参数，则，这两个值是默认值

  ![image-20220404162229144](https://blog-bt.oss-cn-beijing.aliyuncs.com/1/20220404162229.png)

- 更新 grub

  - /etc/default/grub 这个配置文件，并不能别 内核读取到，真正被读取的文件：/boot/grub2/grub.cfg，所以需要下面这个命令，转化
  - grub2-mkconfig -o /boot/grub2/grub.cfg
  - **关于 grub**
    - *操作系统启动的时候，可以通过 grub 传递一些命令，给 linux 内核使用*

- 重启

  - reboot

- 配置关联表

| biosdevname | net.ifnames | 网卡名 |
| ----------- | ----------- | ------ |
| 0           | 1           | ens33  |
| 1           | 0           | em1    |
| 0           | 0           | eth0   |





#### 3.2.3. 查看网关



- 命令

  - route -n

  - -n: 不进行 dns 解析， 显示 ip 地址而非主机名

    ![image-20220404163547015](https://blog-bt.oss-cn-beijing.aliyuncs.com/1/20220404163547.png)





#### 3.2.4. 配置网关



- 添加
  - route add default gw <网关ip>
  - 明细路由
    - route add -host <指定ip> gw <网关ip> 
    - route add -net <网段> netmask <子网掩码> gw <网关ip>

