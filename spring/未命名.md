

The `Validator` and the `DataBinder` make up the `validation` package, which is primarily used in but not limited to the web layer

![image-20220309122004378](https://typora-covey.oss-cn-shanghai.aliyuncs.com/img/image-20220309122004378.png)

## validator 接口

1. api

   1. `supports(Class)`
   2. `validate(Object, org.springframework.validation.Errors)`

2. 配套组件

   1. `Errors`

      - API:
        - `List<ObjectError> getAllErrors()`
        - `void reject(String errorCode);`
        - `void reject(String errorCode, String defaultMessage);`
        - `void reject(String errorCode, @Nullable Object[] errorArgs, @Nullable String defaultMessage);`
        - `void rejectValue(@Nullable String field, String errorCode);`
        - `void rejectValue(@Nullable String field, String errorCode, String defaultMessage);`

      - 实现：`BeanPropertyBindingResult`

   2. `ValidationUtils`

   3. `ObjectError`

      - 子类：`FieldError`

      

      

## 错误文案

1. 文案存储：`MessageSource`

   - API:
     - `String getMessage(String code, @Nullable Object[] args, @Nullable String defaultMessage, Locale locale);`
     - `String getMessage(String code, @Nullable Object[] args, Locale locale)`
     - ==参数中的 `code` 正是 `Errors` 中的 `reject`，`rejectValue` 中的 `errorCode`。正是通过这样从取出错误文案的==

   - 实现：`StaticMessageSource`

   



